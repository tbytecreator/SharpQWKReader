@using SharpQWKReader.Web.Models;
@model OpenPackageViewModel

@{
    ViewData["Title"] = "Package Information";
}

<div class="container mt-5">
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>
                    <i class="bi bi-box-seam"></i> 
                    Package: @Model.PackageFileName
                </h1>
                <a href="@Url.Action("Index", "QWK")" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Back
                </a>
            </div>

            @if (Model.BBSInfo != null)
            {
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-building"></i> BBS Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label fw-bold">BBS Name:</label>
                                    <p class="form-control-plaintext">@Model.BBSInfo.BbsName</p>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Location:</label>
                                    <p class="form-control-plaintext">@Model.BBSInfo.BbsLocation</p>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Phone:</label>
                                    <p class="form-control-plaintext">@Model.BBSInfo.BbsPhone</p>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Sysop:</label>
                                    <p class="form-control-plaintext">@Model.BBSInfo.SysopName</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label fw-bold">User Name:</label>
                                    <p class="form-control-plaintext">@Model.BBSInfo.UserName</p>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">BBS ID:</label>
                                    <p class="form-control-plaintext">@Model.BBSInfo.BbsId</p>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Messages in Packet:</label>
                                    <p class="form-control-plaintext">
                                        <span class="badge bg-success">@Model.BBSInfo.MessagesInPacket</span>
                                    </p>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Package Creation Time:</label>
                                    <p class="form-control-plaintext">@Model.BBSInfo.MailPacketCreationTime</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                @if (Model.BBSInfo.Forums != null && Model.BBSInfo.Forums.Count > 0)
                {
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0"><i class="bi bi-chat-dots"></i> Forums/Conferences (@Model.BBSInfo.Forums.Count)</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped">
                                    <thead class="table-dark">
                                        <tr>
                                            <th><i class="bi bi-hash"></i> ID</th>
                                            <th><i class="bi bi-tag"></i> Forum Name</th>
                                            <th class="text-center"><i class="bi bi-chat-left-text"></i> Messages</th>
                                            <th class="text-center">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var forum in Model.BBSInfo.Forums)
                                        {
                                            <tr>
                                                <td>
                                                    <span class="badge bg-info">@forum.ID</span>
                                                </td>
                                                <td>
                                                    <strong>@forum.Name</strong>
                                                </td>
                                                <td class="text-center">
                                                    <span class="badge bg-secondary">@forum.NumberOfMessages</span>
                                                </td>
                                                <td class="text-center">
                                                    <a href="@Url.Action("Forum", "QWK", new { forumId = forum.ID })" 
                                                       class="btn btn-sm btn-info" 
                                                       title="View messages in this forum">
                                                        <i class="bi bi-eye"></i> View
                                                    </a>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="alert alert-warning" role="alert">
                        <i class="bi bi-exclamation-triangle"></i>
                        No forums/conferences found in this package.
                    </div>
                }
            }
            else
            {
                <div class="alert alert-danger" role="alert">
                    <i class="bi bi-exclamation-circle"></i>
                    Error: Unable to read package information.
                </div>
            }
        </div>
    </div>
</div>

<style>
    body {
        background-color: #f8f9fa;
    }

    .card {
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: none;
        margin-bottom: 1.5rem;
    }

    .card-header {
        border-bottom: 2px solid rgba(255,255,255,0.2);
    }

    .form-control-plaintext {
        padding: 0.375rem 0;
        border-bottom: 1px solid #e9ecef;
    }

    .table-responsive {
        border-radius: 0.375rem;
    }

    .badge {
        font-size: 0.875rem;
        padding: 0.5rem 0.75rem;
    }

    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.875rem;
    }

    h1 {
        color: #333;
        font-weight: 600;
    }
</style>
